# do not edit this file, it will be overwritten on update

ACTION=="remove", GOTO="net_bridge_end"
SUBSYSTEM!="net", GOTO="net_bridge_end"

# Some devices require the port to be up before joining the bridge.
# In such cases, set ID_NET_BRING_UP_BEFORE_JOINING_BRIDGE to "1".

# Texas Instruments Ethernet device with switchdev mode:
# https://docs.kernel.org/networking/device_drivers/ethernet/ti/am65_nuss_cpsw_switchdev.html#enabling-switch
ENV{ID_NET_DRIVER}=="am65-cpsw-nuss", SUBSYSTEMS=="platform", DRIVERS=="am65-cpsw-nuss", \
  PROGRAM="/usr/sbin/devlink dev param show platform/%b name switch_mode", \
  RESULT=="*cmode runtime value true*", \
  ENV{ID_NET_BRING_UP_BEFORE_JOINING_BRIDGE}="1"

LABEL="net_bridge_end"
